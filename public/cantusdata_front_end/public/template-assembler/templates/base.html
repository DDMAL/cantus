<!doctype html>
<!-- paulirish.com/2008/conditional-stylesheets-vs-css-hacks-answer-neither/ -->
<!--[if lt IE 7]> <html class="no-js lt-ie9 lt-ie8 lt-ie7 ui-mobile-rendering" lang="en"> <![endif]-->
<!--[if IE 7]>    <html class="no-js lt-ie9 lt-ie8 ui-mobile-rendering" lang="en"> <![endif]-->
<!--[if IE 8]>    <html class="no-js lt-ie9 ui-mobile-rendering" lang="en"> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js ui-mobile-rendering" lang="en"> <!--<![endif]-->
<head>
    <meta charset="utf-8">

    <link rel="stylesheet" href="/static/css/bootstrap.css">
    <link rel="stylesheet" href="/static/css/bootstrap-theme.css">
    <link rel="stylesheet" href="/static/css/diva.css">
    <link rel="stylesheet" href="/static/css/styles.css">

    <!-- Use the .htaccess and remove these lines to avoid edge case issues.
         More info: h5bp.com/i/378 -->
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">

    <title>Cantus Ultimus</title>
    <link rel="icon" type="image/ico" href="/static/img/favicon.ico">

    <!-- Mobile viewport optimized: h5bp.com/viewport -->
    <meta name="viewport" content="user-scalable=no, initial-scale=1.0, maximum-scale=1.0, width=device-width">

</head>
<body>

<noscript class="no-js-message">
    <div class="container">
        <div class="row">
            <div class="col-lg-12">
                <p>We're sorry, but JavaScript is required to browse the Cantus Ultimus manuscripts. For instructions on how to enable JavaScript, <a href="http://www.enable-javascript.com/" target="_blank">see here</a>. To learn more about the Cantus Ultimus project, visit the <a href="/">home page</a>.</p>
            </div>
        </div>
        <div class="row">
            <div class="col-lg-12"><img class="center-block logos" src="/static/img/all_logos_sm.png"></div>
        </div>
    </div>
</noscript>

<div id="header-container">
    <div id="page-header" class="header"></div>
</div>
<div id="content-container" class="container-fluid">
    <div id="page-content" class="row content">
        <div class="col-lg-12">
            <div id="view-goes-here"></div>
        </div>
    </div>
</div>

${templates}

<script>

    // Mobile/Desktop Detection script
    (function(ua, w, d, undefined) {

        // App Environment
        var production = true,
                filesToLoad,
        //BoilerplateMVC Helper Methods
                boilerplateMVC = {
                    loadJS: function(file, callback) {
                        var script = d.createElement("script");
                        script.type = "text/javascript";
                        if (script.readyState) {  // IE
                            script.onreadystatechange = function() {
                                if (script.readyState == "loaded" || script.readyState == "complete") {
                                    script.onreadystatechange = null;
                                    callback();
                                }
                            };
                        } else {  // Other Browsers
                            script.onload = function() {
                                callback();
                            };
                        }
                        if(((typeof file).toLowerCase()) === "object" && file["data-main"] !== undefined) {
                            script.setAttribute("data-main", file["data-main"]);
                            script.async = true;
                            script.src = file.src;
                        } else {
                            script.src = file;
                        }
                        d.getElementsByTagName("head")[0].appendChild(script);
                    },
                    loadFiles: function(production, obj, callback) {
                        var self = this;
                        if(production) {
                            self.loadJS(obj["prod-js"], callback);
                        } else {
                            self.loadJS(obj["dev-js"], callback);
                        }
                    }
                };

        // JavaScript files to load
        filesToLoad = {
            // Require.js configuration file that is also loaded when in development mode
            "dev-js": { "data-main": "/static/js/app/config/config.js", "src": "/static/js/libs/require.js" },
            // JavaScript initialization file that is loaded when in development mode
            "dev-init": "/static/js/app/init/Init.js",
            // JavaScript file that is loaded when in production mode
            "prod-init": "/static/js/app/cantus.min.js",
            "prod-js": { "data-main": "/static/js/app/config/config.js", "src": "/static/js/libs/require.js" }
        };

        boilerplateMVC.loadFiles(production, filesToLoad, function() {
            if(!production && window.require) {
                require([filesToLoad["dev-init"]]);
            } else if ( production ) {
                require([filesToLoad["prod-init"]])
            }
        });

    })(navigator.userAgent || navigator.vendor || window.opera, window, document);

</script>

<script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
            m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-2371659-10', 'auto');
    ga('send', 'pageview');

</script>

</body>
</html>
